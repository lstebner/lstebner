(function(){var e,t,r,s,n,i,o,a,c,l;i=require("http"),r=require("httpdispatcher"),c=require("pug"),o=require("less"),t=require("underscore"),s=require("fs"),a=3014,e=function(){function e(e,t){this.root_dir=null!=e?e:""+__dirname,this.res=t}return e.prototype.serve_stylesheet=function(e){return console.log("AssetServer::stylesheet "+e),this.res.writeHead("200","Content-Type: text/css"),this.res.end(s.readFileSync(""+this.root_dir+e))},e.prototype.serve_javascript=function(e){return console.log("AssetServer::javascript "+e),this.res.writeHead("200","Content-Type: text/javascript"),this.res.end(s.readFileSync(""+this.root_dir+e))},e.prototype.serve_image=function(e){return console.log("AssetServer::image "+e),this.res.writeHead("200","Content-Type: text/"+e.substr(e.lastIndexOf("."))),this.res.end(s.readFileSync(""+this.root_dir+e))},e}(),n=function(t,s){var n,i,o;return console.log("url hit: "+t.url),o=t.url,i=null,n=new e(__dirname+"/assets/",s),o.match(/css\/[a-zA-Z\/]+\.css/)?n.serve_stylesheet(o,s):o.match(/(coffee|lib)\/[a-zA-Z\/\.\-_0-9]+\.js/)?n.serve_javascript(o,s):o.match(/images\/[a-zA-Z\/\.\-_0-9]+\.(jpg|png)/)?n.serve_image(o,s):r.dispatch(t,s),null==i&&(i="404, whoops"),s.end(i)},r.setStatic("assets"),l=i.createServer(n),r.onGet("/",function(e,t){var r;return t.writeHead("200","Content-Type: text/plain"),r=c.renderFile(__dirname+"/views/beats.pug",{}),t.end(r)}),l.listen(a,function(){return console.log("Server started on port "+a)})}).call(this);