(function(){var e,t,r,s,n,i;t=require("assert"),i=require("sinon"),e=require("./../class/asset_server.js"),r=require("fs"),s={writeHead:i.spy(),end:i.spy()},n=null,beforeEach(function(){return n=new e(__dirname+"/assets/",s)}),afterEach(function(){return s.writeHead.reset(),s.end.reset()}),describe("AssetServer",function(){return it("serves a stylesheet",function(){return n.serve_stylesheet("style.less"),t(s.writeHead.calledWith("200",{"Content-Type":"text/css"}))}),it("serves a coffeescript",function(){return n.serve_coffeescript("main.coffee"),t(s.writeHead.calledWith("200",{"Content-Type":"text/javascript"}))}),it("serves a javascript",function(){return n.serve_javascript("test.js"),t(s.writeHead.calledWith("200",{"Content-Type":"text/javascript"}))}),it("serves an image",function(){return n.serve_image("test.png"),t(s.writeHead.calledWith("200",{"Content-Type":"image/png"}))}),it("can serve svg",function(){return n.serve_image("test_icon.svg"),t(s.writeHead.calledWith("200",{"Content-Type":"image/svg+xml"}))}),it("404's when an asset is not found",function(){return n.serve_javascript("whackfilename.js"),t(s.writeHead.calledWith("404"))}),it("serves coffeescript with replacements",function(){var e;return e=r.readFileSync(__dirname+"/assets/replacements.coffee","utf8"),e=n.process_replacements(e),t(e.match(/PREPEND/)),t(e.match(/INSERT/)),t(e.match(/APPEND/))})})}).call(this);